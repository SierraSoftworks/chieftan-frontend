<template>
  <require from="./components/breadcrumb"></require>
  <require from="./components/permission"></require>

  <breadcrumb name="Projects" route="projects"></breadcrumb>

  <div class="row">
    <div class="col s12 center-align">
      <h2>Projects</h2>
    </div>
  </div>

  <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a route-href="route: newProject" class="btn-floating btn-large red">
      <i class="mi">add</i>
    </a>
  </div>

  <div class="cards-box cards-box-4l">
    <div repeat.for="project of projects">
      <div class="card">
        <div class="card-content">
          <span class="card-title">
            ${project.name}
            <permission class="right" permission="project/:project" context.bind="{ project: project.id }"></permission>
          </span>
          <p>${project.description}</p>
        </div>

        <div class="card-action">
          <a route-href="route: project; params.bind: { project: project.id }" if.bind="'project/:project' & hasPermission:{project:project.id}">Dashboard</a>
          <a href.bind="project.url">Website</a>
        </div>
      </div>
    </div>
  </div>
</template>
